// Patch to add Textures Unlimited to Procedural Parts

// Add the PartModule for switching textures to all procedural part tanks
@PART[proceduralTankLiquid|proceduralTankOre|proceduralTankSRB|proceduralTankXenon|proceduralTanksRealFuels]:FOR[zzzProcUnlimited]
{
    MODULE
    {
        name = KSPTextureSwitch
        sectionName = Procedural Tank
        currentTextureSet = procDefault   // Start with the most basic one
        
        // Each textureSet is a specific set of textures that can be selected in the UI
        textureSet = procDefault
		textureSet = Stringer-S
		textureSet = InsulatedPlain
		textureSet = Metallic
    }
	MODULE
	{
		name = SSTURecolorGUI
	}
}

// This is an individual texture set
KSP_TEXTURE_SET
{
    name = procDefault
    title = Default
    recolorable = true
    MATERIAL
    {
        //shader = SSTU/PBR/Metallic
		shader = SSTU/PBR/Masked
        texture = _MainTex,         ProcUnlimited/Textures/Default.png
        texture = _BumpMap,         ProcUnlimited/Normals/Smooth-NRM.png
        texture = _MetallicGlossMap,ProcUnlimited/Metallic/Smooth-M-MET.png
        texture = _MaskTex,         ProcUnlimited/Masks/Plain-MASK.png
        keyword = TU_RECOLOR
        vector = _DiffuseNorm,      0.5,0.5,0.5
		vector = _MetalNorm,        0.5,0.5,0.5
		vector = _SmoothnessNorm,   0.5,0.5,0.5
    }
    COLORS
    {
        mainColor = white
        //secondColor = black
        //detailColor = steel
    }
}

KSP_TEXTURE_SET
{
    name = Stringer-S
    title = Stringers (Small)
    recolorable = true
    MATERIAL
    {
        //shader = SSTU/PBR/Metallic
		shader = SSTU/PBR/Masked
        texture = _MainTex,         ProcUnlimited/Textures/Stringer-S
        texture = _BumpMap,         ProcUnlimited/Normals/Stringer-S-NRM
        texture = _MetallicGlossMap,ProcUnlimited/Metallic/S-MET
        texture = _MaskTex,         ProcUnlimited/Masks/Plain-MASK
        keyword = TU_RECOLOR
        vector = _DiffuseNorm,      0.5,0.5,0.5
		vector = _MetalNorm,        0.5,0.5,0.5
		vector = _SmoothnessNorm,   0.5,0.5,0.5
    }
    COLORS
    {
        mainColor = white
        secondColor = black
        detailColor = steel
    }
}

KSP_TEXTURE_SET
{
    name = InsulatedPlain
    title = Insulated
    recolorable = true
    MATERIAL
    {
        //shader = SSTU/PBR/Metallic
		shader = SSTU/PBR/Masked
        texture = _MainTex,         ProcUnlimited/Textures/Insulated
        texture = _BumpMap,         ProcUnlimited/Normals/Insulated-M-NRM
        texture = _MetallicGlossMap,ProcUnlimited/Metallic/Insulated-M-MET
        texture = _MaskTex,         ProcUnlimited/Masks/Plain-MASK
        keyword = TU_RECOLOR
        vector = _DiffuseNorm,      0.5,0.5,0.5
		vector = _MetalNorm,        0.5,0.5,0.5
		vector = _SmoothnessNorm,   0.5,0.5,0.5
    }
    COLORS
    {
        mainColor = foam
        //secondColor = black
        //detailColor = steel
    }
}

KSP_TEXTURE_SET
{
    name = Metallic
    title = Metallic
    recolorable = true
    MATERIAL
    {
        //shader = SSTU/PBR/Metallic
		shader = SSTU/PBR/Masked
        texture = _MainTex,         ProcUnlimited/Textures/Default
        texture = _BumpMap,         ProcUnlimited/Normals/Smooth-NRM
        texture = _MetallicGlossMap,ProcUnlimited/Metallic/Metallic-MET
        texture = _MaskTex,         ProcUnlimited/Masks/Plain-MASK
        keyword = TU_RECOLOR
        vector = _DiffuseNorm,      0.5,0.5,0.5
		vector = _MetalNorm,        0.5,0.5,0.5
		vector = _SmoothnessNorm,   0.5,0.5,0.5
    }
    COLORS
    {
        mainColor = silver
        //secondColor = silver
        //detailColor = steel
    }
}
